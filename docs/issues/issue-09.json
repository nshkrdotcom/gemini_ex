{"author":{"id":"MDQ6VXNlcjgwNTY4NTk3","is_bot":false,"login":"yosuaw","name":"Yosua Wijaya"},"body":"As stated in [here](https://ai.google.dev/gemini-api/docs/thinking#set-budget), Gemini API support to specify whether we want to enable, disable, or limit thinking token. I think the current implementation still not supporting that configuration because when I try to run below code, I still get `thoughts_token_count` in the model response.\n\n```\n{:ok, response} = Coordinator.generate_content(\n      contents,\n      [\n        model: \"gemini-2.5-flash\",\n        system_instruction: \"\",\n        temperature: 0.8,\n        top_p: 0.95,\n        max_output_tokens: 65_536,\n        thinking_config: %{\n            thinking_budget: 0\n        },\n      ]\n    )\n```\n\nHere is the output of `response`:\n```\n%Gemini.Types.Response.GenerateContentResponse{\n  usage_metadata: %{\n    candidates_token_count: 10,\n    prompt_token_count: 3,\n    prompt_tokens_details: [%{modality: \"TEXT\", token_count: 3}],\n    thoughts_token_count: 16,\n    total_token_count: 29\n  },\n  prompt_feedback: nil,\n  candidates: [\n    %{\n      index: 0,\n      content: %{\n        parts: [%{text: \"Hello there! How can I help you today?\"}],\n        role: \"model\"\n      },\n      finish_reason: \"STOP\"\n    }\n  ]\n}\n```\nAs you can see, I still get charged from `thoughts_token_count`. Do you planning to support this feature?\n\nThanks","comments":[{"id":"IC_kwDOO3f1O87BFwg4","author":{"login":"nshkrdotcom"},"authorAssociation":"OWNER","body":"@yosuaw Yes, the goal is to continue building out `gemini_ex`. Any chance you could work on it and do a pull request? \n\nSee\nhttps://github.com/nshkrdotcom/gemini_ex/tree/main/oldDocs/docs/spec","createdAt":"2025-08-30T20:01:18Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/nshkrdotcom/gemini_ex/issues/9#issuecomment-3239512120","viewerDidAuthor":true},{"id":"IC_kwDOO3f1O87BRGYE","author":{"login":"yosuaw"},"authorAssociation":"NONE","body":"Iâ€™ve created a PR for this. Apologies for the minimal changes and for not adding tests, as I have other work to do","createdAt":"2025-09-01T13:58:27Z","includesCreatedEdit":false,"isMinimized":false,"minimizedReason":"","reactionGroups":[],"url":"https://github.com/nshkrdotcom/gemini_ex/issues/9#issuecomment-3242485252","viewerDidAuthor":false}],"createdAt":"2025-08-29T10:11:35Z","labels":[],"number":9,"state":"OPEN","title":"Supporting Thinking Budget Config","updatedAt":"2025-09-01T13:58:27Z","url":"https://github.com/nshkrdotcom/gemini_ex/issues/9"}
